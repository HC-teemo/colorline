<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="/css/materialize.min.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="/css/style.css"  media="screen,projection"/>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style media="screen">
    .content{
      width: 100%;
      height:100%;
      position: absolute;
    }
    .buttons{
      width: 100%;
      position: absolute;
      bottom: 0px;
      font-size: 0;
    }
    .buttons button{
      width: 50%;
    }
    .carousel.carousel-slider .carousel-item{
      min-height: 0px;
    }
    .carousel img{
      height: 100%;
    }
    .bordered td{
      padding: 5px 3px;
      font-size:x-small;
    }
    .bordered{
      border-top:1px solid #ee6e73;
    }
    .bordered tr{
      border-bottom:1px solid #ee6e73!important;
    }
    .s12{
      width: 100%!important;
    }
    .price{
      font-size: x-large;
    }
    .choose span{
      font-size: small;
      padding: 1px 5px;
      min-width: 30px;
      display: inline-block;
      text-align: center;
      background-color:#fff;
      color: #ee6e73;
      border-radius:12.5px;
      margin-right: 10px;
      border: 1px solid #ee6e73;
    }
    .choose span.active{
      background-color:#ee6e73;
      color: #fff;
    }
    </style>
  </head>
  <body>
    <nav>
      <div class="nav-wrapper">
        <a href="#" class="brand-logo center">Logo</a>
        <ul id="nav-mobile" class="left">
          <li><a href="/style/<%=cloth.category%>">back</a></li>
        </ul>
      </div>
    </nav>
    <div class="content">
      <div id="pt-main" class="pt-perspective">
          <div class="pt-page pt-page-1">
            <div class="carousel carousel-slider" style="height:300px;">
              <% for(var i=0; i<cloth.othPic.length; i++) {%>
                <a class="carousel-item" href=""><img src="/images/<%= cloth.othPic[i] %>"></a>
              <% } %>
           </div>
           <div class="container">
             <p style="text-align:left;font-size:large;margin-bottom:0"><%=cloth.category%> <%=cloth.name%></p>
             <span class="price main-color">￥<%=cloth.price%></span>
             <div class="choose">
               <p style="text-align:left;font-size:formal;margin-bottom:0">尺码:</p>
               <br>
               <% for(var i=0; i<cloth.size.length; i++) {%>
                 <span><%= cloth.size[i].size %></span>
               <% } %>
             </div>
             <br>
             <br>
             <br>
             <button class="waves-effect waves-light btn main-color-bg" id="go">生成图片</button>
             <p style="text-align:left;font-size:small;margin-bottom:0;color:#ff1744">保存图片，使用打印机打印(推荐A3纸张)</p>
           </div>

            <!-- <p class="main-color">尺码参照表</p>
            <ul id="tabs-swipe-demo" class="tabs">
              <li class="tab col s3"><a class="active" href="#test-swipe-1">男士</a></li>
              <li class="tab col s3"><a  href="#test-swipe-2">女士</a></li>
            </ul>
            <div id="test-swipe-1" class="col s12">
              <table class="centered bordered">
                <tbody>
                  <tr>
                    <td>尺码</td>
                    <td>S</td>
                    <td>M</td>
                    <td>L</td>
                    <td>XL</td>
                    <td>XXL</td>
                  </tr>
                  <tr>
                    <td>型号</td>
                    <td>165/88A</td>
                    <td>170/92A</td>
                    <td>175/96A</td>
                    <td>180/100A</td>
                    <td>185/104A</td>
                  </tr>
                  <tr>
                    <td>说明</td>
                    <td>160~165cm<br>45~55kg</td>
                    <td>165~170cm<br>50~65kg</td>
                    <td>170~175cm<br>55~70kg</td>
                    <td>175~180cm<br>60~75kg</td>
                    <td>180~185cm<br>65~80kg</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div id="test-swipe-2" class="col s12">
              <table class="centered bordered">
                <tbody>
                  <tr>
                    <td>尺码</td>
                    <td>S</td>
                    <td>M</td>
                    <td>L</td>
                    <td>XL</td>
                    <td>XXL</td>
                  </tr>
                  <tr>
                    <td>型号</td>
                    <td>165/88A</td>
                    <td>170/92A</td>
                    <td>175/96A</td>
                    <td>180/100A</td>
                    <td>185/104A</td>
                  </tr>
                  <tr>
                    <td>说明</td>
                    <td>160~165cm<br>45~55kg</td>
                    <td>160~165cm<br>45~55kg</td>
                    <td>160~165cm<br>45~55kg</td>
                    <td>160~165cm<br>45~55kg</td>
                    <td>160~165cm<br>45~55kg</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <span>选择尺码:</span> -->
          </div>
      </div>
    </div>
    <div id="modal1" class="modal modal-fixed-footer">
    <div class="modal-content">

    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">关闭</a>
    </div>
  </div>
    <!-- <div class="buttons" style="display: block;">
      <button class="waves-effect waves-light btn main-color-bg disabled" id="previous"><i class="material-icons left">skip_previous</i>返回</button>
      <button class="waves-effect waves-light btn main-color-bg" id="next">确认<i class="material-icons right">skip_next</i></button> -->
    <!-- </div>
    <div class="pt-triggers" style="display: block;">
        <button id="iterateEffects" class="pt-touch-button">显示下一页切换</button>
    </div> -->
    <script type="text/javascript" src="/js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="/js/materialize.min.js"></script>
    <script type="text/javascript">
      var dataset={
        cloth:<%- JSON.stringify(cloth) %>
      };
      console.debug(dataset);
    </script>
    <script type="text/javascript">
    $(document).ready(function() {
      //change height
      $(".content").eq(0).height($(".content").eq(0).height()-56);
      //init
      $('.carousel.carousel-slider').carousel({fullWidth: true});
      $('.carousel.carousel-slider').height(260);
      $('#tabs-swipe-demo').tabs({ 'swipeable': true });
      $('.tabs-content.carousel').height(150);
      $(".choose span").on('click', function(event) {
        $(".choose span").not($(this)).removeClass('active');
        $(this).addClass('active');
      });
      //render
      var cloth=dataset.cloth;
      //event
      var sizes=$(".choose span");
      var go=$("#go");
      go.on('click', function(event) {
        var choosed = sizes.filter(".active").text();
        console.debug(choosed);
        if(!choosed){
          Materialize.toast('请选择尺码!', 2000);
        }else{
          for (var j=0;j<cloth.size.length;j++) {
            var s=cloth.size[j];
            console.debug("s:"+s.size);
            if (s.size==choosed) {
              var choosedobj=s;
            }
          }
          console.debug(choosedobj);
          $('.modal').modal();
          $("#modal1 .modal-content").append(`<img style="width:100%;" src="/images/${choosedobj.img}" alt="" />`);
          $('#modal1').modal('open');
        }
      });
    });
    </script>
  </body>
</html>
